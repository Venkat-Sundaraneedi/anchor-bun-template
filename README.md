# Bun Kit - Solana Program Template

A minimal, modern Solana program template using Anchor framework with Bun runtime.

## Prerequisites

| Tool           | Purpose                       | Installation                                                    |
| -------------- | ----------------------------- | --------------------------------------------------------------- |
| **Mise**       | Task runner & version manager | `curl https://mise.run \| sh`                                   |
| **Solana CLI** | Solana toolchain              | `sh -c "$(curl -sSfL https://release.anza.xyz/stable/install)"` |
| **Anchor CLI** | Solana framework              | See compilation instructions below                              |
| **Surfpool**   | Local validator               | `curl -sL https://run.surfpool.run/ \| bash`                    |

```bash
# Optional QoL: Enable mise completions
mise use -g usage
```

### Anchor CLI Installation (Compiled from master)

This template uses Anchor's master branch. To install:

```bash
# Clone and build anchor from source
git clone https://github.com/solana-foundation/anchor.git
cd anchor
cargo build -p anchor-cli --release

# Copy to global PATH
cp target/release/anchor ~/.local/bin/  # or any directory in your PATH
```

Verify installations:

```bash
mise --version
solana --version
anchor --version
surfpool --version
```

## Quick Start

```bash
# Clone and setup
git clone https://github.com/Venkat-Sundaraneedi/anchor-bun-template.git
cd anchor-bun-template
mise trust    # Trust the mise configuration
mise install  # Install project dependencies (tools)

mise setup  # Install project dependencies (npm packages)

# Run tests
mise test
```

## Opinionated Tech Stack

| Component           | This Template            | Default Anchor        |
| ------------------- | ------------------------ | --------------------- |
| **Package Manager** | Bun                      | Yarn/NPM              |
| **Test Runner**     | Bun test                 | Mocha                 |
| **Client Library**  | Generated via Codama     | anchor-lang/core      |
| **Web3 Library**    | @solana/kit (Web3.js v2) | @solana/web3.js v1    |
| **Testing Framework**      | solana-kit-plugins(litesvm)               | Manual        |
| **Automation**      | Mise tasks               | Custom scripts        |
| **Localnet**        | Surfpool                 | solana-test-validator |

## Project Structure

```
├── programs/bun-kit/          # Solana program (Rust)
├── tests/                     # Test suite (TypeScript)
├── clients/js/src/generated/  # Client code (generated by Codama)
└── migrations/               # Deployment scripts
```

## Tech Stack (Installed automatically via mise)

| Component       | Purpose                      | Version    |
| --------------- | ---------------------------- | ---------- |
| **Bun**         | JavaScript runtime           | 1.3.7      |
| **Anchor Lang** | Solana framework             | Git master |
| **Codama**      | TypeScript client generation | 1.3.8+     |
| **Solana Kit (with plugins)**  | Web3.js v2 wrapper           | 5.5.1      |
| **Oxlint**      | TypeScript linting           | latest     |
| **Oxfmt**       | TypeScript formatting        | latest     |

## Development Workflow

```bash
// ====================================
// SETUP & SYNC
// ====================================
mise setup      # Install dependencies
mise sync       # Sync Anchor keys

// ====================================
// DEVELOPMENT
// ====================================
mise fmt        # Format code (TypeScript + Rust)
mise lint       # Lint and fix
mise build      # Build program and generate Codama clients

// ====================================
// TESTING & DEPLOYMENT
// ====================================
mise test       # Run tests (using Bun test runner)


// ====================================
// DEPLOYMENT
// ====================================
# Note: Ensure surfpool is running for localnet deployment
mise localnet   # Start local validator (surfpool)
mise deploy     # Deploy to localnet
```

## Configuration Files

- **Anchor.toml** - Program configuration and provider settings
- **mise.toml** - Task runner and tool versions
- **codama.json** - Codama client generation configuration
- **Cargo.toml** - Rust workspace configuration

## Testing

Tests use Bun's built-in test runner with Codama-generated clients:

```typescript
import { getInitializeInstruction } from "../clients/js/src/generated";
```

## Local Development Notes

// ====================================
// IMPORTANT
// ====================================
// For localnet deployment, ensure surfpool is running.
(The project is configured to deploy to localnet by default.)

## Code Quality

- **Formatter**: Oxfmt (TypeScript) + cargo fmt (Rust)
- **Linter**: Oxlint with auto-fix
- **Client Generation**: Codama generates TypeScript clients from Anchor IDL

## Maintenance

```bash
mise update    # Update project dependencies
mise clean     # Clean build artifacts and caches
```

## Network Configuration

Default network: **localnet**

- Update `provider.cluster` in `Anchor.toml` for different networks
- Ensure corresponding validator (surfpool for localnet) is running
